!function(t){var e={};function o(i){if(e[i])return e[i].exports;var n=e[i]={i:i,l:!1,exports:{}};return t[i].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=t,o.c=e,o.d=function(t,e,i){o.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:i})},o.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="",o(o.s=11)}([function(t,e){t.exports={ADDED:"todoAdd",REMOVED:"todoRemove",CHANGED:"todoChanged",UPDATE_VIEW_ADD_NEW:"addToView",UPDATE_VIEW_REMOVE:"removeFromView",UDATE_VIEW_SELECT_ALL:"updateAllSelect",SELECT_ALL:"selectAll",UPDATE_VIEW_STATUS_CHANGED:"updateStatus",DELETE_COMPLETED:"deleteCompleted",FILTER_CHANGED:"filterChanged"}},function(t,e){function o(){this.eventListeners={}}var i=new o;o.prototype.on=function(t,e,o){return t in i.eventListeners?i.eventListeners[t].push({handler:e,context:o}):(i.eventListeners[t]=[],i.eventListeners[t].push({handler:e,context:o})),i},o.prototype.off=function(t,e,o){return i.eventListeners[t]=evenManager.eventListeners[t].filter(function(t){return t.handler!==e&&t.context!==o}),i},o.prototype.trigger=function(t,e){if(void 0!==i.eventListeners[t]){let o=i.eventListeners[t].slice();for(let t=0;t<o.length;t++)o[t].handler.call(o[t].context,e)}return i},t.exports=o},function(t,e){var o=document.createElement("div");var i={todoItem:t=>{let e=function(t){let e=document.getElementById(t);o.innerHTML=e.innerHTML;let i=o.children[0];return o.removeChild(i),i}("template"),i=e.querySelector(".todos-item_done-mark"),n=e.querySelector(".todos-item_delete"),s=e.querySelector(".todos-item_text");return t.text&&(s.innerText=t.text),t.isReady&&(i.checked=!0),{root:e,text:s,doneMark:i,remove:n}}};t.exports=i},function(t,e){t.exports={ALL:0,COMPLETED:2,UNDONE:1}},function(t,e,o){const i=o(1);o(0);function n(t){this._id=t.id,this._isDone=t.isDone||!1,this._text=t.text}n.prototype=Object.create(i.prototype),n.prototype.constructor=n,n.prototype.getId=function(){return this._id},n.prototype.isDone=function(){return this._isDone},n.prototype.setText=function(t){this._text=t},n.prototype.setDone=function(t){this._isDone=!!t},n.prototype.changeDone=function(){return this._isDone=!this._isDone,this._isDone},n.prototype.getText=function(){return this._text},n.prototype.setEventSubscribers=function(){},t.exports=n},function(t,e,o){const i=o(0),n=o(1),s=o(3);function r(t){this._filters=t.children,this._currentFilter=s.ALL,this._filters[s.ALL].addEventListener("click",this._checkAndTrigger.bind(this,s.ALL)),this._filters[s.UNDONE].addEventListener("click",this._checkAndTrigger.bind(this,s.UNDONE)),this._filters[s.COMPLETED].addEventListener("click",this._checkAndTrigger.bind(this,s.COMPLETED))}r.prototype=Object.create(n.prototype),r.prototype.constructor=r,r.prototype.setEventSubscribers=function(){this.on(i.FILTER_CHANGED,this._onFilterChange,this)},r.prototype._onFilterChange=function(t){this._filters[this._currentFilter].classList.remove("__active"),this._filters[t].classList.add("__active"),this._currentFilter=t},r.prototype._checkAndTrigger=function(t){this._currentFilter!==t&&this.trigger(i.FILTER_CHANGED,t)},t.exports=r},function(t,e,o){const i=o(0),n=o(1);function s(t,e){this._listModel=e,this._deleteCompletedButton=t.querySelector(".todos-status-bar_delete-completed"),this._undoneCounterText=t.querySelector(".todos-status-bar_counter"),this._deleteCompletedButton.addEventListener("click",this._onDeleteCompletedClick.bind(this))}s.prototype=Object.create(n.prototype),s.prototype.constructor=s,s.prototype._onDeleteCompletedClick=function(t){this.trigger(i.DELETE_COMPLETED)},s.prototype._onAnyChange=function(){this._undoneCounterText.innerText=this._listModel.getItemsUndone()+" tasks to do"},s.prototype.setEventSubscribers=function(){this.on(i.ADDED,this._onAnyChange,this),this.on(i.CHANGED,this._onAnyChange,this),this.on(i.SELECT_ALL,this._onAnyChange,this),this.on(i.REMOVED,this._onAnyChange,this)},t.exports=s},function(t,e,o){o(2);const i=o(1),n=o(0);function s(t,e){this._root=t.root,this._model=e,this._doneMark=t.doneMark,this._removeButton=t.remove,this._text=t.text,this._doneMark.addEventListener("click",this._onChangeState.bind(this)),this._text.addEventListener("blur",this._onBlurText.bind(this)),this._removeButton.addEventListener("click",this._onRemoveButtonClick.bind(this))}s.prototype=Object.create(i.prototype),s.prototype.constructor=s,s.prototype._onBlurText=function(t){this._model.setText(this._text.value)},s.prototype._onChangeState=function(t){this.trigger(n.CHANGED,this._model)},s.prototype.getRoot=function(){return this._root},s.prototype.getModel=function(){return this._model},s.prototype._onRemoveButtonClick=function(t){this.trigger(n.REMOVED,this._model)},s.prototype.hide=function(){this._root.classList.contains("__hidden")||this._root.classList.add("__hidden")},s.prototype.show=function(){this._root.classList.contains("__hidden")&&this._root.classList.remove("__hidden")},s.prototype.render=function(){this._model.isDone()?this._root.classList.add("__done"):this._root.classList.remove("__done")},t.exports=s},function(t,e,o){const i=o(2),n=o(1),s=o(0),r=o(3),h=o(7);function c(t,e){this._todoListModel=t,this._root=e,this._itemViews=[]}c.prototype=Object.create(n.prototype),c.prototype.constructor=c,c.prototype._onAdd=function(t){if(t.constructor===Array)for(let e=0;e<t.length;e++)this._createNewItem(t[e],this._root);else this._createNewItem(t,this._root)},c.prototype._createNewItem=function(t,e){let o=i.todoItem({text:t.getText()}),n=new h(o,t);this._itemViews.push(n),e.appendChild(o.root)},c.prototype._onSelectAll=function(){for(let t=0;t<this._root.children.length;t++)this._root.children[t].classList.add("__done")},c.prototype._onItemModelChange=function(t){this._itemViews.find(e=>e._model.getId()===t.getId()).render()},c.prototype._onItemRemove=function(t){let e=this._itemViews.findIndex(e=>e._model.getId()===t.getId());this._root.removeChild(this._itemViews[e].getRoot()),this._itemViews.splice(e,1)},c.prototype._onFilterChange=function(t){switch(t){case r.ALL:for(let t=0;t<this._itemViews.length;t++)this._itemViews[t].show();break;case r.COMPLETED:for(let t=0;t<this._itemViews.length;t++)this._itemViews[t].getModel().isDone()?this._itemViews[t].show():this._itemViews[t].hide();break;case r.UNDONE:for(let t=0;t<this._itemViews.length;t++)this._itemViews[t].getModel().isDone()?this._itemViews[t].hide():this._itemViews[t].show()}},c.prototype.setEventSubscribers=function(){this.on(s.UPDATE_VIEW_ADD_NEW,this._onAdd,this),this.on(s.UDATE_VIEW_SELECT_ALL,this._onSelectAll,this),this.on(s.UPDATE_VIEW_STATUS_CHANGED,this._onItemModelChange,this),this.on(s.UPDATE_VIEW_REMOVE,this._onItemRemove,this),this.on(s.FILTER_CHANGED,this._onFilterChange,this)},t.exports=c},function(t,e,o){const i=o(0),n=o(1);o(4),o(2);function s(t){this._input=t.querySelector(".todos-input_input-text"),this._selectAllButton=t.querySelector(".todos-input_select-all"),this._input.addEventListener("keypress",this),this._selectAllButton.addEventListener("click",this)}s.prototype=Object.create(n.prototype),s.prototype.constructor=s,s.prototype.handleEvent=function(t){switch(t.type){case"click":t.target===this._selectAllButton&&this.trigger(i.SELECT_ALL);break;case"keypress":13===t.keyCode&&(""!==this._input.value&&this.trigger(i.ADDED,{text:this._input.value.trim()}),this._input.value="")}},t.exports=s},function(t,e,o){const i=o(1),n=o(0),s=o(4);function r(t){this._itemsIdCount=0,this._items=t||[],this._itemsUndone=0}r.prototype=Object.create(i.prototype),r.prototype.constructor=r,r.prototype.getItems=function(){return this._items},r.prototype.getItemsUndone=function(){return this._itemsUndone},r.prototype.add=function(t){let e=new s(Object.assign({id:this._itemsIdCount++},t));this._items.push(e),this._itemsUndone++,this.trigger(n.UPDATE_VIEW_ADD_NEW,e)},r.prototype.delete=function(t){let e=this._items.findIndex(e=>e.getId()===t.getId());this.trigger(n.UPDATE_VIEW_REMOVE,this._items[e]),this._items[e].isDone()||this._itemsUndone--,this._items.splice(e,1)},r.prototype._onSelectAll=function(){for(let t=0;t<this._items.length;t++)this.setDone(this._items[t],!0);this._itemsUndone=0,this.trigger(n.UDATE_VIEW_SELECT_ALL)},r.prototype.setDone=function(t,e){t.setDone(e)},r.prototype._onItemChange=function(t){let e=this._items.findIndex(e=>e.getId()===t.getId());this._items[e].changeDone()?this._itemsUndone--:this._itemsUndone++,this.trigger(n.UPDATE_VIEW_STATUS_CHANGED,this._items[e])},r.prototype._onDeleteCompleted=function(){let t=0;for(;t<this._items.length;)this._items[t].isDone()?(this.trigger(n.UPDATE_VIEW_REMOVE,this._items[t]),this._items.splice(t,1)):t++},r.prototype.setEventSubscribers=function(){this.on(n.ADDED,this.add,this),this.on(n.REMOVED,this.delete,this),this.on(n.SELECT_ALL,this._onSelectAll,this),this.on(n.CHANGED,this._onItemChange,this),this.on(n.DELETE_COMPLETED,this._onDeleteCompleted,this)},t.exports=r},function(t,e,o){document.addEventListener("DOMContentLoaded",function(){const t=document.querySelector(".main-wrapper"),e=(new n(t.querySelector(".todos-input")),new i),o=new s(e,t.querySelector(".todos-items-list")),c=new r(t.querySelector(".todos-status-bar"),e),_=new h(t.querySelector(".todos-status-bar").querySelector(".todos-status-bar_filters"));e.setEventSubscribers(),o.setEventSubscribers(),c.setEventSubscribers(),_.setEventSubscribers()});const i=o(10),n=o(9),s=o(8),r=o(6),h=o(5)}]);
//# sourceMappingURL=bundle.js.map