{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./front/src/scripts/constants/ConstatntManager.js","webpack:///./front/src/scripts/utils/EventManager.js","webpack:///./front/src/scripts/utils/TemplateCreator.js","webpack:///./front/src/scripts/utils/Requests.js","webpack:///./front/src/scripts/constants/FilterManager.js","webpack:///./front/src/scripts/models/TodoItemModelN.js","webpack:///./front/src/scripts/views/FilterView.js","webpack:///./front/src/scripts/controllers/ActionBarController.js","webpack:///./front/src/scripts/views/TodoItemView.js","webpack:///./front/src/scripts/views/TodoListView.js","webpack:///./front/src/scripts/controllers/TodoListController.js","webpack:///./front/src/scripts/models/TodoListModelN.js","webpack:///./front/src/scripts/main.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","r","value","n","__esModule","object","property","prototype","hasOwnProperty","p","s","ADDED","REMOVED","CHANGED","UPDATE_VIEW_ADD_NEW","UPDATE_VIEW_REMOVE","UDATE_VIEW_SELECT_ALL","SELECT_ALL","UPDATE_VIEW_STATUS_CHANGED","DELETE_COMPLETED","FILTER_CHANGED","EventManger","this","eventListeners","eventManager","on","event","handler","context","push","off","evenManager","filter","trigger","data","undefined","subscribersCopy","slice","length","divElement","document","createElement","TemplateCreator","todoItem","root","scriptId","script","getElementById","innerHTML","result","children","removeChild","getTemplateRootNode","doneMark","querySelector","remove","text","innerText","isReady","checked","Requests","mainPath","contentType","headerType","errorMessage","addItem","model","reqBody","_text","getText","_isDone","isDone","req","XMLHttpRequest","open","setRequestHeader","send","JSON","stringify","onload","status","respBody","parse","response","alert","deleteItem","itemId","getUserItems","console","log","changeState","item","getId","changeText","changeAllToDone","requests","ALL","COMPLETED","UNDONE","EventManager","TodoItemModel","_id","create","constructor","setId","id","setText","setDone","changeDone","setEventSubscribers","Events","FilterTypes","FilterView","_filters","_currentFilter","addEventListener","_checkAndTrigger","bind","_onFilterChange","filterType","classList","add","ActionBarController","listModel","_listModel","_deleteCompletedButton","_undoneCounterText","_onDeleteCompletedClick","e","_onAnyChange","getItemsUndone","TodoItemView","element","_root","_model","_doneMark","_removeButton","_onChangeState","_onBlurText","_onRemoveButtonClick","render","getModel","getRoot","hide","contains","show","Filters","TodoListView","_todoListModel","_itemViews","_onAdd","Array","_createNewItem","parent","itemVals","itemView","appendChild","_onSelectAll","_onItemModelChange","find","_onItemRemove","removingElementIndex","findIndex","splice","TodoListController","_input","_selectAllButton","handleEvent","type","target","keyCode","trim","TodoListModel","items","_items","_itemsUndone","setItemsArray","getItems","updateItemsUndone","needRequest","newItem","resp","delete","removingItemPosition","arrayItem","_onItemChange","index","_onDeleteCompleted","globalWrapper","todoListModel","todoListView","actionBarController","filterView"],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 12);\n","const CONSTANTS = {\n  ADDED: 'todoAdd',\n  REMOVED: 'todoRemove',\n  CHANGED: 'todoChanged',\n  UPDATE_VIEW_ADD_NEW: 'addToView',\n  UPDATE_VIEW_REMOVE: 'removeFromView',\n  UDATE_VIEW_SELECT_ALL: 'updateAllSelect',\n  SELECT_ALL: 'selectAll',\n  UPDATE_VIEW_STATUS_CHANGED: 'updateStatus',\n  DELETE_COMPLETED: 'deleteCompleted',\n  FILTER_CHANGED: 'filterChanged',\n  // UPDATE_VIEW_DELETE_COMPLETED: 'updateViewDeleteCompleted',\n};\n\nmodule.exports = CONSTANTS;","function EventManger() {\n    this.eventListeners = {};\n}\n\nvar eventManager = new EventManger();\n\nEventManger.prototype.on = function (event, handler, context) {\n    if (event in eventManager.eventListeners) {\n        eventManager.eventListeners[event].push({handler: handler, context: context});\n    } else {\n        eventManager.eventListeners[event] = [];\n        eventManager.eventListeners[event].push({handler: handler, context: context});\n    }\n    return eventManager;\n};\n\nEventManger.prototype.off = function (event, handler, context) {\n    eventManager.eventListeners[event] = evenManager.eventListeners[event].filter(function (value) {\n        return value.handler !== handler && value.context !== context;\n    });\n    return eventManager;\n};\nEventManger.prototype.trigger = function (event, data) {\n    if (eventManager.eventListeners[event] !== undefined) {\n        let subscribersCopy = eventManager.eventListeners[event].slice();\n        for (let i = 0; i < subscribersCopy.length; i++) {\n            subscribersCopy[i].handler.call(subscribersCopy[i].context, data);\n        }\n    }\n    return eventManager;\n};\n\nmodule.exports = EventManger;","var divElement = document.createElement('div');\n\nfunction getTemplateRootNode(scriptId) {\n    let script = document.getElementById(scriptId);\n    divElement.innerHTML = script.innerHTML;\n\n    let result = divElement.children[0];\n    divElement.removeChild(result);\n\n    return result;\n}\n\nvar TemplateCreator = {\n    todoItem: data => {\n        let root = getTemplateRootNode('template');\n        let doneMark = root.querySelector('.todos-item_done-mark');\n        let remove = root.querySelector('.todos-item_delete');\n        let text = root.querySelector('.todos-item_text');\n\n        if (data.text) {\n            text.innerText = data.text;\n        }\n\n        if (data.isReady) {\n            doneMark.checked = true;\n        }\n\n        return {\n            root: root,\n            text: text,\n            doneMark: doneMark,\n            remove: remove\n        };\n    }\n};\n\nmodule.exports = TemplateCreator;\n","function Requests() {\n  this.mainPath = '/items';\n  this.contentType = 'Content-Type';\n  this.headerType = 'application/json';\n  this.errorMessage = 'Error. Try again';\n}\n\n\n\nRequests.prototype.addItem = function (model, handler) {\n  let reqBody = {\n    _text: model.getText(),\n    _isDone: model.isDone(),\n  };\n\n  let req = new XMLHttpRequest();\n  req.open('POST', this.mainPath + '/add', true);\n  req.setRequestHeader(this.contentType, this.headerType);\n  req.send(JSON.stringify(reqBody));\n  req.onload = function () {\n    if (req.status === 200) {\n      let respBody = JSON.parse(req.response);\n      handler(respBody);\n    } else {\n      alert(this.errorMessage);\n    }\n  }\n};\n\nRequests.prototype.deleteItem = function (itemId) {\n  let req = new XMLHttpRequest();\n  req.open('DELETE', this.mainPath + '/' + itemId);\n  req.send();\n};\n\nRequests.prototype.getUserItems = function (handler) {\n  let req = new XMLHttpRequest();\n  req.open('GET', this.mainPath + '/list', true);\n  req.send();\n  req.onload = function () {\n    if (req.status === 200) {\n      let respBody = JSON.parse(req.response);\n      console.log(respBody);\n      handler(respBody);\n    } else {\n      alert(this.errorMessage);\n    }\n  }\n};\n\nRequests.prototype.changeState = function(item) {\n  let reqBody = {\n    _isDone: item.isDone(),\n  };\n\n  let req = new XMLHttpRequest();\n  req.open('PATCH', this.mainPath + '/' + item.getId() + '/changestate');\n  req.setRequestHeader(this.contentType, this.headerType);\n  req.send(JSON.stringify(reqBody));\n  req.onload = function () {\n    if (req.status !== 200) {\n      alert(this.errorMessage);\n    }\n  }\n};\n\nRequests.prototype.changeText = function(item) {\n  let reqBody = {\n    text: item.getText(),\n  };\n  let req = new XMLHttpRequest();\n  req.open('PATCH', this.mainPath + '/' + item.getId() + '/setcontent');\n  req.setRequestHeader(this.contentType, this.headerType);\n  req.send(JSON.stringify(reqBody));\n  req.onload = function () {\n    if (req.status !== 200) {\n      alert(this.errorMessage);\n    }\n  }\n};\n\nRequests.prototype.changeAllToDone = function() {\n  let req = new XMLHttpRequest();\n  req.open('PATCH', this.mainPath + '/changeall');\n  req.send();\n  req.onload = function () {\n    if (req.status !== 200) {\n      alert(this.errorMessage);\n    }\n  }\n};\n\n\nrequests = new Requests();\n\nmodule.exports = requests;","const FILTERSMAP = {\n  ALL: 0,\n  COMPLETED: 2,\n  UNDONE: 1,\n};\n\n\nmodule.exports = FILTERSMAP;","const EventManager = require('../utils/EventManager');\nconst Events = require('../constants/ConstatntManager');\n\nfunction TodoItemModel(data) {\n  this._id = data._id || 0;\n  this._isDone = data._isDone || false;\n  this._text = data._text;\n}\n\nTodoItemModel.prototype = Object.create(EventManager.prototype);\nTodoItemModel.prototype.constructor = TodoItemModel;\n\nTodoItemModel.prototype.getId = function () {\n  return this._id;\n};\n\nTodoItemModel.prototype.setId = function (id) {\n  this._id = id;\n};\n\nTodoItemModel.prototype.isDone = function () {\n  return this._isDone;\n\n};\n\nTodoItemModel.prototype.setText = function (text) {\n  this._text = text;\n};\n\nTodoItemModel.prototype.setDone = function (value) {\n  if (value) {\n    this._isDone = true;\n  } else {\n    this._isDone = false;\n  }\n};\n\nTodoItemModel.prototype.changeDone = function () {\n  this._isDone = !this._isDone;\n  return this._isDone;\n};\n\nTodoItemModel.prototype.getText = function () {\n  return this._text;\n};\n\nTodoItemModel.prototype.setEventSubscribers = function () {\n\n};\n\nmodule.exports = TodoItemModel;\n","const Events = require('../constants/ConstatntManager');\nconst EventManager = require('../utils/EventManager');\nconst FilterTypes = require('../constants/FilterManager');\n\nfunction FilterView(root) {\n  this._filters = root.children;\n  this._currentFilter = FilterTypes.ALL;\n  this._filters[FilterTypes.ALL].addEventListener('click', this._checkAndTrigger.bind(this, FilterTypes.ALL));\n  this._filters[FilterTypes.UNDONE].addEventListener('click', this._checkAndTrigger.bind(this, FilterTypes.UNDONE));\n  this._filters[FilterTypes.COMPLETED].addEventListener('click', this._checkAndTrigger.bind(this, FilterTypes.COMPLETED));\n}\n\nFilterView.prototype = Object.create(EventManager.prototype);\nFilterView.prototype.constructor = FilterView;\n\nFilterView.prototype.setEventSubscribers = function () {\n  this.on(Events.FILTER_CHANGED, this._onFilterChange, this);\n};\n\nFilterView.prototype._onFilterChange = function (filterType) {\n  this._filters[this._currentFilter].classList.remove('__active');\n  this._filters[filterType].classList.add('__active');\n  this._currentFilter = filterType;\n};\n\n\n\nFilterView.prototype._checkAndTrigger = function (filter) {\n  if (this._currentFilter !== filter) {\n    this.trigger(Events.FILTER_CHANGED, filter);\n  }\n};\n\nmodule.exports = FilterView;","const Events = require('../constants/ConstatntManager');\nconst EventManager = require('../utils/EventManager');\n\n\nfunction ActionBarController(root, listModel) {\n  this._listModel = listModel;\n  this._deleteCompletedButton = root.querySelector('.todos-status-bar_delete-completed');\n  this._undoneCounterText = root.querySelector('.todos-status-bar_counter');\n  this._deleteCompletedButton.addEventListener('click', this._onDeleteCompletedClick.bind(this));\n\n}\n\nActionBarController.prototype = Object.create(EventManager.prototype);\nActionBarController.prototype.constructor = ActionBarController;\n\nActionBarController.prototype._onDeleteCompletedClick = function (e) {\n  this.trigger(Events.DELETE_COMPLETED);\n};\n\nActionBarController.prototype._onAnyChange = function () {\n  this._undoneCounterText.innerText = this._listModel.getItemsUndone() + ' tasks to do';\n};\n\nActionBarController.prototype.setEventSubscribers = function () {\n  this.on(Events.ADDED, this._onAnyChange, this);\n  this.on(Events.CHANGED, this._onAnyChange, this);\n  this.on(Events.SELECT_ALL, this._onAnyChange, this);\n  this.on(Events.REMOVED, this._onAnyChange, this);\n\n};\n\n\n\nmodule.exports = ActionBarController;","const TemplateCreator = require('../utils/TemplateCreator');\nconst EventManager = require('../utils/EventManager');\nconst Events = require('../constants/ConstatntManager');\nconst Requests = require('../utils/Requests');\n\n\nfunction TodoItemView(element, model) {\n\n  this._root = element.root;\n  this._model = model;\n  this._doneMark = element.doneMark;\n  this._removeButton = element.remove;\n  this._text = element.text;\n  this._doneMark.addEventListener('click', this._onChangeState.bind(this));\n  this._text.addEventListener('blur', this._onBlurText.bind(this));\n  this._removeButton.addEventListener('click', this._onRemoveButtonClick.bind(this));\n  this.render();\n}\n\n\nTodoItemView.prototype = Object.create(EventManager.prototype);\nTodoItemView.prototype.constructor = TodoItemView;\n\n\nTodoItemView.prototype._onBlurText = function (e) {\n  console.log(\"inside blur text\" + this._text.innerText);\n  this._model.setText(this._text.innerText);\n  Requests.changeText(this.getModel());\n\n};\n\nTodoItemView.prototype._onChangeState = function (e) {\n  this.trigger(Events.CHANGED, this._model);\n};\n\nTodoItemView.prototype.getRoot = function () {\n  return this._root;\n};\n\nTodoItemView.prototype.getModel = function () {\n  return this._model;\n};\n\nTodoItemView.prototype._onRemoveButtonClick = function (e) {\n  this.trigger(Events.REMOVED, this._model);\n};\n\nTodoItemView.prototype.hide = function () {\n  if (!this._root.classList.contains('__hidden')) {\n    this._root.classList.add('__hidden');\n  }\n};\n\nTodoItemView.prototype.show = function () {\n  if (this._root.classList.contains('__hidden')) {\n    this._root.classList.remove('__hidden');\n  }\n};\n\nTodoItemView.prototype.render = function () {\n  if (this._model.isDone()) {\n    this._root.classList.add('__done');\n  } else {\n    this._root.classList.remove('__done');\n  }\n};\n\nmodule.exports = TodoItemView;\n\n\n\n","const TemplateCreator = require('../utils/TemplateCreator');\nconst EventManager = require('../utils/EventManager');\nconst Events = require('../constants/ConstatntManager');\nconst Filters = require('../constants/FilterManager');\nconst TodoItemView = require('../views/TodoItemView');\n\n\nfunction TodoListView(model, root) {\n  this._todoListModel = model;\n  this._root = root;\n  this._itemViews = [];\n}\n\nTodoListView.prototype = Object.create(EventManager.prototype);\nTodoListView.prototype.constructor = TodoListView;\n\nTodoListView.prototype._onAdd = function (model) {\n  if (model.constructor === Array) {\n    for (let i = 0; i < model.length; i++) {\n      this._createNewItem(model[i], this._root);\n    }\n  } else {\n    this._createNewItem(model, this._root);\n  }\n\n};\n\nTodoListView.prototype._createNewItem = function (item, parent) {\n  let itemVals = {\n    text: item.getText(),\n    isReady: item.isDone(),\n  };\n  let element = TemplateCreator.todoItem(itemVals);\n  let itemView = new TodoItemView(element, item);\n  this._itemViews.push(itemView);\n  parent.appendChild(element.root);\n\n};\n\nTodoListView.prototype._onSelectAll = function () {\n  for (let i = 0; i < this._root.children.length; i++) {\n    this._root.children[i].classList.add('__done');\n  }\n\n};\n\n// TodoListView.prototype._changeDoneMark = function (model) {\n//   let index = this._itemViews.findIndex((element) => element._model.getId() === model.getId());\n//\n// }\n//\nTodoListView.prototype._onItemModelChange = function (item) {\n  let changedItem = this._itemViews.find((element) => element._model.getId() === item.getId());\n  changedItem.render();\n};\n\nTodoListView.prototype._onItemRemove = function (item) {\n  let removingElementIndex = this._itemViews.findIndex((element) => element._model.getId() === item.getId());\n  this._root.removeChild(this._itemViews[removingElementIndex].getRoot());\n  this._itemViews.splice(removingElementIndex, 1);\n};\n\nTodoListView.prototype._onFilterChange = function (filterType) {\n  switch (filterType) {\n    case Filters.ALL:\n      for (let i = 0; i < this._itemViews.length; i++) {\n        this._itemViews[i].show();\n      }\n      break;\n    case Filters.COMPLETED:\n      for (let i = 0; i < this._itemViews.length; i++) {\n        if (!this._itemViews[i].getModel().isDone()) {\n          this._itemViews[i].hide();\n        } else {\n          this._itemViews[i].show();\n        }\n      }\n      break;\n    case Filters.UNDONE:\n      for (let i = 0; i < this._itemViews.length; i++) {\n        if (this._itemViews[i].getModel().isDone()) {\n          this._itemViews[i].hide();\n        } else {\n          this._itemViews[i].show();\n        }\n      }\n      break;\n  }\n};\n\n\nTodoListView.prototype.setEventSubscribers = function () {\n  this.on(Events.UPDATE_VIEW_ADD_NEW, this._onAdd, this);\n  this.on(Events.UDATE_VIEW_SELECT_ALL, this._onSelectAll, this);\n  this.on(Events.UPDATE_VIEW_STATUS_CHANGED, this._onItemModelChange, this);\n  this.on(Events.UPDATE_VIEW_REMOVE, this._onItemRemove, this);\n  this.on(Events.FILTER_CHANGED, this._onFilterChange, this);\n};\n\n\nmodule.exports = TodoListView;","const Events = require('../constants/ConstatntManager');\nconst EventManager = require('../utils/EventManager');\nconst TodoItemModel = require('../models/TodoItemModelN');\nconst TemplateCreator = require('../utils/TemplateCreator');\n\n\n\nfunction TodoListController(root) {\n\n  // this._root = root.querySelector;\n  this._input = root.querySelector('.todos-input_input-text');\n  this._selectAllButton = root.querySelector('.todos-input_select-all');\n  this._input.addEventListener('keypress', this);\n  this._selectAllButton.addEventListener('click', this);\n}\n\nTodoListController.prototype = Object.create(EventManager.prototype);\nTodoListController.prototype.constructor = TodoListController;\n\nTodoListController.prototype.handleEvent = function (e) {\n  switch (e.type) {\n    case 'click':\n      if (e.target === this._selectAllButton) {\n        this.trigger(Events.SELECT_ALL);\n      }\n      break;\n    case 'keypress':\n      if (e.keyCode === 13) {\n        if (this._input.value !== '') {\n          this.trigger(Events.ADDED, {_text: this._input.value.trim()});\n        }\n        this._input.value = '';\n      }\n  }\n};\n\nmodule.exports = TodoListController;","const EventManager = require('../utils/EventManager');\nconst Events = require('../constants/ConstatntManager');\nconst TodoItemModel = require('../models/TodoItemModelN');\nconst Requests = require('../utils/Requests');\n\nfunction TodoListModel(items) {\n  this._items = items || [];\n  this._itemsUndone = 0;\n\n}\n\n\nTodoListModel.prototype = Object.create(EventManager.prototype);\nTodoListModel.prototype.constructor = TodoListModel;\n\nTodoListModel.prototype.setItemsArray = function (items) {\n  for (let i = 0; i < items.length; i++) {\n    this.add.call(this, items[i], true);\n  }\n};\n\nTodoListModel.prototype.getItems = function () {\n  return this._items;\n};\n\nTodoListModel.prototype.getItemsUndone = function () {\n  return this._itemsUndone;\n};\n\nTodoListModel.prototype.updateItemsUndone = function() {\n  for (let i = 0; i < this._items.length; i++) {\n    if (!this._items[i].isDone()) {\n      this._itemsUndone++;\n    }\n  }\n};\n\nTodoListModel.prototype.add = function (item, needRequest) {\n  let newItem = new TodoItemModel(item);\n\n  if(needRequest === undefined) {\n    Requests.addItem(newItem, function (resp) {\n      newItem.setId(resp['_id']);\n    });\n  }\n  this._items.push(newItem);\n  this._itemsUndone++;\n  this.trigger(Events.UPDATE_VIEW_ADD_NEW, newItem);\n};\n\nTodoListModel.prototype.delete = function (item) {\n  let removingItemPosition = this._items.findIndex((arrayItem) => arrayItem.getId() === item.getId());\n  console.log(item.getId());\n  Requests.deleteItem(item.getId());\n  this.trigger(Events.UPDATE_VIEW_REMOVE, this._items[removingItemPosition]);\n  if (!this._items[removingItemPosition].isDone()) {\n    this._itemsUndone--;\n  }\n  this._items.splice(removingItemPosition, 1);\n};\n\nTodoListModel.prototype._onSelectAll = function () {\n  for (let i = 0; i < this._items.length; i++) {\n    this.setDone(this._items[i], true);\n  }\n  this._itemsUndone = 0;\n  Requests.changeAllToDone();\n\n  this.trigger(Events.UDATE_VIEW_SELECT_ALL);\n};\n\nTodoListModel.prototype.setDone = function (element, value) {\n  element.setDone(value);\n};\n\nTodoListModel.prototype._onItemChange = function(model) {\n  let index = this._items.findIndex((element) => element.getId() === model.getId());\n  if (this._items[index].changeDone()) {\n    this._itemsUndone--;\n  } else {\n    this._itemsUndone++;\n  }\n  Requests.changeState(this._items[index]);\n  this.trigger(Events.UPDATE_VIEW_STATUS_CHANGED, this._items[index]);\n};\n\nTodoListModel.prototype._onDeleteCompleted = function() {\n  let i = 0;\n  while (i < this._items.length) {\n    if (this._items[i].isDone()) {\n      this.trigger(Events.UPDATE_VIEW_REMOVE, this._items[i]);\n      Requests.deleteItem(this._items[i].getId());\n      this._items.splice(i, 1);\n    } else {\n      i++;\n    }\n  }\n};\n\n\nTodoListModel.prototype.setEventSubscribers = function () {\n  this.on(Events.ADDED, this.add, this); //TODO: check if call `this.add` works!\n  this.on(Events.REMOVED, this.delete, this);\n  this.on(Events.SELECT_ALL, this._onSelectAll, this);\n  this.on(Events.CHANGED, this._onItemChange, this);\n  this.on(Events.DELETE_COMPLETED, this._onDeleteCompleted, this);\n};\n\nmodule.exports = TodoListModel;\n","\ndocument.addEventListener('DOMContentLoaded', init);\n\nconst TodoListModel = require('./models/TodoListModelN');\nconst TodoListController = require('./controllers/TodoListController');\nconst TodoListView = require('./views/TodoListView');\nconst ActionBarController = require('./controllers/ActionBarController');\nconst FilterView = require('./views/FilterView');\nconst requests = require('./utils/Requests');\n\n\nfunction init() {\n  const globalWrapper = document.querySelector('.main-wrapper');\n  const todoListController = new TodoListController(globalWrapper.querySelector('.todos-input'));\n  const todoListModel = new TodoListModel();\n  requests.getUserItems((items) => todoListModel.setItemsArray(items));\n  const todoListView = new TodoListView(todoListModel,globalWrapper.querySelector('.todos-items-list'));\n  const actionBarController = new ActionBarController(globalWrapper.querySelector('.todos-status-bar'), todoListModel);\n  const filterView = new FilterView(globalWrapper.querySelector('.todos-status-bar').querySelector('.todos-status-bar_filters'));\n  todoListModel.setEventSubscribers();\n  todoListView.setEventSubscribers();\n  actionBarController.setEventSubscribers();\n  filterView.setEventSubscribers();\n\n}"],"sourceRoot":""}